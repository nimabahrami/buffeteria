<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUFFETRIA | Focus</title>
    <!-- Use Inter font for Focus look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css?v=3">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">

        <!-- LANDING VIEW (Initial State) -->
        <div id="landingView" class="landing-container">
            <div class="landing-content">
                <div class="landing-logo">Buffetria</div>
                <div class="landing-search-wrapper">
                    <input type="text" id="landingInput" placeholder="SEARCH TICKER..." autocomplete="off"
                        onkeydown="if(event.key==='Enter') runAnalysis(this.value)">
                </div>
            </div>
        </div>

        <!-- DASHBOARD VIEW (Hidden Initially) -->
        <div id="dashboardView" style="display: none;">
            <!-- Minimal Header -->
            <header class="main-header">
                <div class="logo">Buffetria</div>

                <div class="search-container">
                    <input type="text" id="tickerInput" placeholder="SEARCH TICKER" autocomplete="off"
                        onkeydown="if(event.key==='Enter') runAnalysis(this.value)">
                    <div id="tickerSuggestions" class="suggestions-dropdown"></div>
                </div>

                <div class="header-right">
                    <!-- Right actions -->
                </div>
            </header>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Loading Overlay -->
                <div id="loadingOverlay" style="display: none;">
                    <div class="spinner"></div>
                    <div class="loading-text">ANALYZING MARKET DATA...</div>
                </div>

                <!-- Ticker Info Bar -->
                <div class="info-bar">
                    <div class="ticker-ident">
                        <h1 id="tickerTitle">--</h1>
                        <div id="priceDisplay" class="price-display">
                            <span id="currentPrice">--</span>
                            <span id="priceChange" class="change-pill">--</span>
                        </div>
                    </div>
                    <div class="key-metrics" id="marketMetrics">
                        <!-- Injected via JS -->
                    </div>
                </div>

                <div class="dashboard-stack">

                    <!-- Top Row: Chart (2/3) + Volume (1/3) -->
                    <div class="dashboard-row">
                        <!-- 1. Price Chart Section -->
                        <div class="chart-section-wrapper">
                            <div class="card chart-card">
                                <div class="chart-controls-row">
                                    <div class="control-group">
                                        <span class="control-label">RANGE</span>
                                        <div class="btn-group" id="timeRangeGroup">
                                            <button class="btn-toggle" onclick="setPeriod('1y')">1Y</button>
                                            <button class="btn-toggle active" onclick="setPeriod('2y')">2Y</button>
                                            <button class="btn-toggle" onclick="setPeriod('5y')">5Y</button>
                                            <button class="btn-toggle" onclick="setPeriod('max')">MAX</button>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="control-label">MOVING AVG</span>
                                        <div class="btn-group" id="maGroup">
                                            <button class="btn-toggle active" onclick="toggleMA(0, this)">NONE</button>
                                            <button class="btn-toggle" onclick="toggleMA(50, this)">50D</button>
                                            <button class="btn-toggle" onclick="toggleMA(200, this)">200D</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="chart-wrapper">
                                    <canvas id="priceChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Order Flow (Rectangular Block - Side) -->
                        <div class="volume-section-wrapper">
                            <div class="card volume-card">
                                <div class="card-header-simple">
                                    <h3>ORDER FLOW (VOL/PRICE)</h3>
                                </div>
                                <div class="volume-chart-wrapper">
                                    <canvas id="volumeChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Scorecard & Analysis -->
                    <div class="card stats-card">
                        <h3>DIAGNOSTIC SCORECARD</h3>
                        <div class="score-summary">
                            <div class="gauge-row">
                                <div class="gauge-container">
                                    <div class="gauge-fill" id="scoreFill" style="width: 0%"></div>
                                </div>
                                <span id="scoreText">0/18</span>
                            </div>

                            <div class="table-wrapper">
                                <table id="scoreTable">
                                    <thead>
                                        <tr>
                                            <th>Check</th>
                                            <th>Value</th>
                                            <th>Reference</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="/static/js/script.js"></script>
</body>

</html>